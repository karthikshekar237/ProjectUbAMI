name: InstallDependencies
description: Install common tools into SOE.
schemaVersion: 1.0

phases:
  - name: build
    steps:
      - name: UpdateSystem
        action: ExecuteBash
        inputs:
          commands:
            - |
              set -x

              echo "Updating the system"
              DEBIAN_FRONTEND=noninteractive apt-get -y update
              DEBIAN_FRONTEND=noninteractive apt-get -y upgrade

      - name: InstallHttpd
        action: ExecuteBash
        inputs:
          commands:
            - |
              set -x

              echo "Install Apache HTTP Server"
              DEBIAN_FRONTEND=noninteractive apt-get -y install apache2

      - name: InstallGit
        action: ExecuteBash
        inputs:
          commands:
            - |
              set -x

              echo "Install Git"
              DEBIAN_FRONTEND=noninteractive apt-get -y install git

      - name: InstallAnsible
        action: ExecuteBash
        inputs:
          commands:
            - |
              set -x

              echo "Install Ansible"
              DEBIAN_FRONTEND=noninteractive apt-get -y install ansible

      - name: validate
        steps:
          - name: validate
            action: ExecuteBash
            inputs:
              commands:
                - |

                  echo "Validating the version of tools installed in SOE"
                  git --version
                  ansible --version
                  apache2 -v
